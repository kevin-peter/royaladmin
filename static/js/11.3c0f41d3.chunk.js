(this["webpackJsonpsri-app"]=this["webpackJsonpsri-app"]||[]).push([[11],{132:function(e,t,a){"use strict";a.r(t);var c=a(15),s=a(3),n=a(6),l=a(7),r=a(2),i=a(5),d=a(8),o=a(18),b=a(1),j=function(e){return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:"alert ".concat(e.className?e.className:"alert-success"," alert-dismissible slideUp show "),role:"alert",style:{position:"fixed",width:"auto",right:"10px",bottom:"0"},children:[e.message,Object(b.jsx)("button",{onClick:e.closeMessage,type:"button",className:"close","data-dismiss":"alert","aria-label":"Close",style:{padding:"7px"},children:Object(b.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]})})},u=(a(29),a(70),a(97)),p=a(89);t.default=function(e){var t=Object(r.useContext)(o.b),a=Object(i.p)(),m=a.eventid,O=(a.eventtype,Object(r.useState)(!1)),h=Object(l.a)(O,2),x=h[0],f=h[1],v=Object(r.useState)([]),g=Object(l.a)(v,2),w=g[0],N=g[1],y=Object(r.useState)([]),k=Object(l.a)(y,2),S=(k[0],k[1]),_=Object(r.useState)(!1),M=Object(l.a)(_,2),C=(M[0],M[1],Object(r.useState)([])),E=Object(l.a)(C,2),L=(E[0],E[1],Object(r.useState)([])),z=Object(l.a)(L,2),B=(z[0],z[1],Object(r.useState)([])),R=Object(l.a)(B,2),T=(R[0],R[1],Object(r.useState)([])),A=Object(l.a)(T,2),H=(A[0],A[1],Object(r.useState)([])),I=Object(l.a)(H,2),J=(I[0],I[1],Object(r.useState)(!1)),V=Object(l.a)(J,2),F=(V[0],V[1],Object(r.useState)(0)),P=Object(l.a)(F,2),D=(P[0],P[1],Object(r.useState)("")),K=Object(l.a)(D,2),U=(K[0],K[1],Object(r.useState)({})),q=Object(l.a)(U,2),G=(q[0],q[1],Object(r.useState)({})),Q=Object(l.a)(G,2),W=(Q[0],Q[1],Object(r.useState)()),X=Object(l.a)(W,2),Y=X[0],Z=X[1],$=Object(r.useState)("alert alert-success"),ee=Object(l.a)($,2),te=(ee[0],ee[1]);Object(r.useEffect)((function(){ae()}),[]);var ae=function(){var a=Object(n.a)(Object(s.a)().mark((function a(c){var n,l,r;return Object(s.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:f(!0),n={event_id:m},(l=new Headers).append("Content-Type","application/json"),l.append("Authorization","Bearer "+t.getItem("jwt")),r={method:"POST",headers:l,redirect:"follow",body:JSON.stringify(n)},fetch("https://api.munimji.co/api/v1/event/getMarkets",r).then((function(t){if(403!==t.status)return t.json();e.navigate("/login")})).then((function(e){e.data&&N(e.data),e.players&&S(e.players)})).catch((function(e){console.log(e)})).finally((function(){f(!1)}));case 7:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),ce=function(){var t=Object(n.a)(Object(s.a)().mark((function t(a,l,r,i){var d,o,b;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:f(!0),(d=new Headers).append("Content-Type","application/json"),d.append("Authorization","Bearer "+localStorage.getItem("jwt")),o={event_id:r.event_id,type_name:r.market_name,market_id:r.id},"visible"===l?(o.visible=a,o.locked=r.locked):"locked"===l&&(o.locked=a,o.visible=r.visible),o.type=l,b={method:"POST",headers:d,body:JSON.stringify(o)},fetch("https://api.munimji.co/api/v1/event/updateMarketStatus",b).then((function(t){if(401!==t.status)return t.json();e.navigate("/login")})).then((function(e){if(e.message){var t=Object(c.a)(w);"visible"===l?t[i].visible=a:"locked"===l&&(t[i].locked=a),Z(e.message),te("alert alert-success")}})).catch((function(e){Z(e),te("alert alert-danger")})).finally(Object(n.a)(Object(s.a)().mark((function e(){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout((function(){te(""),Z("")}),3e3),f(!1);case 2:case"end":return e.stop()}}),e)}))));case 9:case"end":return t.stop()}}),t)})));return function(e,a,c,s){return t.apply(this,arguments)}}(),se=function(){var e=Object(n.a)(Object(s.a)().mark((function e(t){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Z(!1);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(d.b,{className:"btn btn-sm btn-dark ms-1",title:"Other",to:"/eventlist/",children:"BACK"}),Object(b.jsx)("div",{className:"row",children:Object(b.jsx)("div",{className:"col-12 p-0",children:Object(b.jsx)("div",{className:"table-responsive",children:Object(b.jsxs)("table",{className:"table table-bordered table-striped table-sm table-dark",children:[Object(b.jsx)("thead",{className:"",children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{width:"5%",className:"text-center px-2 py-0.5",children:"Sr."}),Object(b.jsx)("th",{className:"px-2 py-1 text-left",children:"Name"}),Object(b.jsx)("th",{className:"px-2 py-1 text-left",children:"Event ID"}),Object(b.jsx)("th",{className:"px-2 py-1 text-left",children:"Runner (per Team)"}),Object(b.jsx)("th",{className:"px-2 py-1 text-center",children:"Visible"}),Object(b.jsx)("th",{className:"px-2 py-1 text-center",children:"Locked"}),Object(b.jsx)("th",{className:"px-2 py-1 text-center",children:"Action"})]})}),Object(b.jsx)("tbody",{children:w.map((function(e,t){return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{className:"text-center px-2 py-1",width:"5%",children:t+1}),Object(b.jsx)("td",{className:"px-2 py-0.5 text-left",children:e.market_name}),Object(b.jsx)("td",{className:"px-2 py-0.5 text-left",children:e.event_id}),Object(b.jsx)("td",{className:"px-2 py-0.5 text-left",children:e.runner_count}),Object(b.jsx)("td",{className:"px-2 py-0.5 text-center",children:Object(b.jsx)("button",{title:"Market Visible",onClick:Object(n.a)(Object(s.a)().mark((function a(){return Object(s.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,ce(null!==e.visible&&!e.visible,"visible",e,t);case 2:case"end":return a.stop()}}),a)}))),className:"btn btn-sm ".concat(null===e.visible||!0===Boolean(e.visible)?"btn-success":"btn-danger"),disabled:x||!e.parent_visible,children:Object(b.jsx)(u.a,{className:"w-6"})})}),Object(b.jsx)("td",{className:"px-2 py-0.5 text-center",children:Object(b.jsx)("button",{title:"Market Lock",onClick:Object(n.a)(Object(s.a)().mark((function a(){return Object(s.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,ce(null!==e.locked&&!e.locked,"locked",e,t);case 2:case"end":return a.stop()}}),a)}))),className:"btn btn-sm me-1 ".concat(null===e.locked||!1===Boolean(e.locked)?"btn-success":"btn-danger"),disabled:x||e.parent_locked,children:Object(b.jsx)(p.a,{className:"w-6"})})}),Object(b.jsx)("td",{className:"px-2 py-0.5 text-center"})]},t)}))})]})})})},"markets"),Y&&Object(b.jsx)(j,{message:Y,closeMessage:se})]})}},70:function(e,t,a){"use strict";var c=a(2),s=a(1);t.a=function(e){return Object(c.useEffect)((function(){return document.body.classList.add("modal-open"),function(){document.body.classList.remove("modal-open")}}),[]),Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("div",{className:"modal fade show",id:"create_new_party",tabIndex:-1,"aria-labelledby":"exampleModalLabel","aria-modal":"true",role:"dialog",style:{display:"block",paddingLeft:"0px"},children:Object(s.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-lg model-content-box",children:Object(s.jsxs)("div",{className:"modal-content rounded-0 ".concat(e.className?e.className:"blue-light-bg"),children:[Object(s.jsxs)("div",{className:"modal-header",children:[Object(s.jsx)("h3",{className:"modal-title center badge badge-pill badge-warning",id:"exampleModalLabel",children:e.title}),""!=e.sub_title&&Object(s.jsx)("p",{className:"modal-title right badge badge-pill badge-warning ml-1",id:"exampleModalLabel",children:e.sub_title}),Object(s.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:function(t){e.closeModal()},children:Object(s.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(s.jsx)("div",{className:"modal-body",children:e.children}),Object(s.jsx)("div",{className:"modal-footer"})]})})}),Object(s.jsx)("div",{className:"modal-backdrop fade show"})]})}},89:function(e,t,a){"use strict";var c=a(2);var s=c.forwardRef((function(e,t){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e),c.createElement("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"}))}));t.a=s},97:function(e,t,a){"use strict";var c=a(2);var s=c.forwardRef((function(e,t){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e),c.createElement("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),c.createElement("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"}))}));t.a=s}}]);