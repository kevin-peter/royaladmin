(this["webpackJsonpsri-app"]=this["webpackJsonpsri-app"]||[]).push([[12],{133:function(e,t,a){"use strict";a.r(t);var n=a(15),c=a(11),s=a(17),r=a(3),l=a(6),i=a(7),o=a(2),d=a(18),u=a(70),b=a(1),j=function(e){var t=null,a=(Object(o.useContext)(d.b),Object(o.useState)("")),n=Object(i.a)(a,2),c=n[0],s=n[1],r=Object(o.useState)(!1),l=Object(i.a)(r,2),j=l[0],p=l[1],m=Object(o.useState)(""),O=Object(i.a)(m,2),h=O[0],f=O[1],x=Object(o.useState)("alert alert-success"),v=Object(i.a)(x,2),g=v[0],y=v[1];return Object(b.jsx)(u.a,{closeModal:e.closeModal,title:"CREATE NEW MARKET",children:Object(b.jsx)("div",{className:"model-table-content",children:Object(b.jsx)("form",{className:"form-inline",autoComplete:"off",onSubmit:function(a){a.preventDefault();var n=new Headers;n.append("Content-Type","application/json"),n.append("Authorization","Bearer "+localStorage.getItem("jwt"));var r={name:c},l={method:"POST",headers:n,body:JSON.stringify(r)};fetch("https://api.munimji.co/api/v1/setting/createMarket",l).then((function(a){if(a.ok?(y("alert alert-success"),s(""),t.focus()):y("alert alert-danger"),403!==a.status)return a.json();e.navigate("/login")})).then((function(e){f(e.message),setTimeout((function(){f("")}),3e3),p(!1)})).catch((function(){p(!1)}))},children:Object(b.jsxs)("div",{className:"grid grid-cols-12 gap-1 text-blue-900 dark:text-white  px-1 py-1",children:[Object(b.jsxs)("div",{className:"form-group mt-1",children:[Object(b.jsx)("label",{className:"float-start col-12 col-md-2 ",children:"Market Name"}),Object(b.jsx)("input",{placeholder:"Market Name",type:"text",value:c,onChange:function(e){return s(e.target.value)},maxLength:"50",required:!0,ref:function(e){t=e}})]}),Object(b.jsx)("div",{className:"clear-both h-0 col-span-12"}),Object(b.jsxs)("div",{className:"form-group mt-1",children:[Object(b.jsx)("button",{title:"Create User",type:"submit",disabled:j,className:"btn btn-sm btn-primary",children:"Create"}),Object(b.jsx)("button",{className:"btn btn-sm btn-danger float-end",onClick:e.closeModal,children:"Cancel"})]}),Object(b.jsx)("div",{className:"col-span-8 md:col-span-10 text-center",children:h&&Object(b.jsx)("span",{className:"px-2 py-1 bg-primary-900 ".concat(g," "),children:h})})]})})})})},p=a(97),m=a(89);t.default=function(e){var t=Object(o.useContext)(d.b),a=Object(o.useState)(!1),u=Object(i.a)(a,2),O=u[0],h=u[1],f=Object(o.useState)([]),x=Object(i.a)(f,2),v=x[0],g=x[1],y=Object(o.useState)(!1),w=Object(i.a)(y,2),N=w[0],k=w[1],S=Object(o.useState)([]),C=Object(i.a)(S,2),M=C[0],_=C[1],E=Object(o.useState)(""),T=Object(i.a)(E,2),R=(T[0],T[1]),L=Object(o.useState)(""),z=Object(i.a)(L,2),B=(z[0],z[1],Object(o.useState)("")),A=Object(i.a)(B,2),H=A[0],D=A[1],F=Object(o.useState)(),I=Object(i.a)(F,2),J=(I[0],I[1]),P=Object(o.useState)("alert alert-success"),V=Object(i.a)(P,2),K=(V[0],V[1]),q=function(){var e=Object(l.a)(Object(r.a)().mark((function e(t){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:R(""),D(""),k(!1),U();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){U()}),[]);var U=function(){var a=Object(l.a)(Object(r.a)().mark((function a(n){var l;return Object(r.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:h(!0),(l=new Headers).append("Content-Type","application/json"),l.append("Authorization","Bearer "+t.getItem("jwt")),fetch("https://api.munimji.co/api/v1/setting/getDefaultMrkt",{method:"POST",headers:l}).then((function(t){if(403!==t.status)return t.json();e.navigate("/login")})).then((function(e){e.data&&g(e.data);for(var t=Object(s.a)({},M),a=0;a<e.data.length;a++)t=Object(s.a)(Object(s.a)({},t),{},Object(c.a)({},e.data[a].id,e.data[a].display_order));_(t)})).catch((function(e){console.log(e)})).finally((function(){h(!1)}));case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),W=function(){var t=Object(l.a)(Object(r.a)().mark((function t(a,c,s,i){var o,d,u;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:h(!0),(o=new Headers).append("Content-Type","application/json"),o.append("Authorization","Bearer "+localStorage.getItem("jwt")),d={market_id:s},"status"===c?d.status=a:"visible"===c?d.visible=a:"locked"===c?d.locked=a:"runner_type"===c?d.runner_type=a:"display_order"===c?d.display_order=a:"runner_count"===c&&(d.runner_count=a),u={method:"POST",headers:o,body:JSON.stringify(d)},fetch("https://api.munimji.co/api/v1/setting/lockMarket",u).then((function(t){if(401!==t.status)return t.json();e.navigate("/login")})).then((function(e){if(e.message){var t=Object(n.a)(v);"status"===c?t[i].status=a:"visible"===c?t[i].visible=a:"locked"===c?t[i].locked=a:"runner_count"===c&&(t[i].runner_count=a),J(e.message),K("alert alert-success")}})).catch((function(e){J(e),K("alert alert-danger")})).finally(Object(l.a)(Object(r.a)().mark((function e(){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout((function(){K(""),J("")}),3e3),h(!1);case 2:case"end":return e.stop()}}),e)}))));case 8:case"end":return t.stop()}}),t)})));return function(e,a,n,c){return t.apply(this,arguments)}}(),G=function(){var e=Object(l.a)(Object(r.a)().mark((function e(t,a,n){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==n.key){e.next=3;break}return e.next=3,W(n.target.value,"display_order",t,a);case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Q=function(){var e=Object(l.a)(Object(r.a)().mark((function e(t,a){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_(Object(s.a)(Object(s.a)({},M),{},Object(c.a)({},t,a.target.value)));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"row",children:Object(b.jsxs)("div",{className:"col-12",children:[Object(b.jsx)("h1",{className:"text-center",children:"- : Market List : -"}),Object(b.jsx)("button",{onClick:function(e){k(!0)},className:"btn btn-sm btn-secondary float-right mt-2",children:"+"})]})}),Object(b.jsx)("div",{className:"table-responsive mt-2",children:Object(b.jsxs)("table",{className:"table table-bordered table-striped table-sm report-table",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{width:"5%",className:"text-center px-2 py-0.5",children:"Sr."}),Object(b.jsx)("th",{className:"px-2 py-1 text-left",children:"Market Name"}),Object(b.jsx)("th",{className:"px-2 py-1 text-left",children:"Runner Count"}),Object(b.jsx)("th",{className:"px-2 py-1 text-left",children:"Runner Type"}),Object(b.jsx)("th",{className:"px-2 py-1 text-left",children:"Display Order"}),Object(b.jsx)("th",{className:"px-2 py-1 text-left",children:"Status"}),Object(b.jsx)("th",{className:"px-2 py-1 text-center",children:"Action"})]})}),Object(b.jsx)("tbody",{children:v.map((function(e,t){return Object(b.jsxs)("tr",{role:"button",title:e.name,className:"bg-white dark:bg-sky-300/10 dark:border-blue-500 border-primary-300",children:[Object(b.jsx)("td",{className:"text-center px-2 py-1",width:"5%",children:t+1}),Object(b.jsx)("td",{className:"text-left px-2 py-1",width:"50%",children:e.name}),Object(b.jsx)("td",{className:"text-left px-2 py-1",width:"10%",children:Object(b.jsx)("select",{className:"form-select",value:e.runner_count,onChange:function(){var a=Object(l.a)(Object(r.a)().mark((function a(n){return Object(r.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,W(n.target.value,"runner_count",e.id,t);case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),children:Object(n.a)(Array(11).keys()).map((function(e){return Object(b.jsx)("option",{value:e,children:0===e?"-":e},e)}))})}),Object(b.jsx)("td",{className:"text-left px-2 py-1",width:"10%",children:e.runner_type}),Object(b.jsx)("td",{className:"text-left px-2 py-1",width:"10%",children:Object(b.jsx)("input",{type:"text",name:e.id,value:M[e.id],className:"form-control form-control-sm",onChange:function(t){return Q(e.id,t)},onKeyDown:function(a){return G(e.id,t,a)}},t)}),Object(b.jsx)("td",{className:"text-center px-2 py-1",width:"5%",children:Object(b.jsx)("button",{title:"Market Status",onClick:Object(l.a)(Object(r.a)().mark((function a(){return Object(r.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,W(null!==e.status&&!e.status,"status",e.id,t);case 2:case"end":return a.stop()}}),a)}))),className:"btn btn-sm ".concat(null===e.status||!0===Boolean(e.status)?"btn-success":"btn-danger"),children:1==e.status?"ON":"OFF"})}),Object(b.jsxs)("td",{className:"text-center text-xs",children:[Object(b.jsx)("button",{title:"Market Visible",onClick:Object(l.a)(Object(r.a)().mark((function a(){return Object(r.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,W(null!==e.visible&&!e.visible,"visible",e.id,t);case 2:case"end":return a.stop()}}),a)}))),className:"btn btn-sm ms-1 mr-1 ".concat(null===e.visible||!0===Boolean(e.visible)?"btn-success":"btn-danger"),children:Object(b.jsx)(p.a,{className:"w-6"})}),Object(b.jsx)("button",{title:"Market Lock",onClick:Object(l.a)(Object(r.a)().mark((function a(){return Object(r.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,W(null!==e.locked&&!e.locked,"locked",e.id,t);case 2:case"end":return a.stop()}}),a)}))),className:"btn btn-sm ms-1 ".concat(null===e.locked||!1===Boolean(e.locked)?"btn-success":"btn-danger"),disabled:O,children:Object(b.jsx)(m.a,{className:"w-6"})})]})]})}))})]})}),N&&Object(b.jsx)(j,{title:H,closeModal:q})]})}},70:function(e,t,a){"use strict";var n=a(2),c=a(1);t.a=function(e){return Object(n.useEffect)((function(){return document.body.classList.add("modal-open"),function(){document.body.classList.remove("modal-open")}}),[]),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:"modal fade show",id:"create_new_party",tabIndex:-1,"aria-labelledby":"exampleModalLabel","aria-modal":"true",role:"dialog",style:{display:"block",paddingLeft:"0px"},children:Object(c.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-lg model-content-box",children:Object(c.jsxs)("div",{className:"modal-content rounded-0 ".concat(e.className?e.className:"blue-light-bg"),children:[Object(c.jsxs)("div",{className:"modal-header",children:[Object(c.jsx)("h3",{className:"modal-title center badge badge-pill badge-warning",id:"exampleModalLabel",children:e.title}),""!=e.sub_title&&Object(c.jsx)("p",{className:"modal-title right badge badge-pill badge-warning ml-1",id:"exampleModalLabel",children:e.sub_title}),Object(c.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:function(t){e.closeModal()},children:Object(c.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(c.jsx)("div",{className:"modal-body",children:e.children}),Object(c.jsx)("div",{className:"modal-footer"})]})})}),Object(c.jsx)("div",{className:"modal-backdrop fade show"})]})}},89:function(e,t,a){"use strict";var n=a(2);var c=n.forwardRef((function(e,t){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e),n.createElement("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"}))}));t.a=c},97:function(e,t,a){"use strict";var n=a(2);var c=n.forwardRef((function(e,t){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e),n.createElement("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),n.createElement("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"}))}));t.a=c}}]);